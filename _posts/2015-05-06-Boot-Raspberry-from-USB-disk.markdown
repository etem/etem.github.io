---
layout: post
title:  "Зареждане на Raspberry Pi от USB флашка"
date:   2015-05-06 19:42:31
comments : true
categories: linux raspberrypi
banner_image: rasp.png
---

Както може би знаете Raspberry Pi е направен да зарежда(boot-ва) от SD или в новия модел microSD карта.
Зареждането на системата от флашка место SD карта има някои предимства.
За мен най-осезаемото беше скоростта и стабилността на работа.Понеже моята карта е клас 4,скоростта със картата беше значително по-ниска и понякога забиваше.

Обаче има една уловка.За да зареди системата все пак се нуждаете от самата SD карта.Тя пак първоначално ще си зарежда Bootloader-а от там.Това което ще направим е просто да променим местоположението на кореновата файлова система(/) да сочи към USB флашката и от там ще се извършва зареждането на операционната система.

Самото настройване за USB boot е лесно.Запишете вашият Raspbian имидж файл на флашка.
Може би сте забелязали че записващата програма създава 2 партишъна в устройството.Единият от тях е boot партишън.
Подгответе си една microSD карта като я форматирате с FAT и копирайте всички файлове от boot партишъна на USB флашката в картата.

След като сте копирали файловете е нужно да редактирате cmdline.txt файла в картата.
Променете полето `root=/dev/mmcblk0p2` на `root=/dev/sda2`.


Вече сте готови да заредите системата от USB-то.
Ако използвате raspi-config скрипта за оразмеряването на файловата системата ще ви даде грешка понеже скриптът е направен да търси mmcblk вместо sda диск.
За да решите проблема изпълнете следните команди :

**cp /usr/bin/raspi-config ~**

**sed -i 's/mmcblk0p/sda/' ~/raspi-config**

**sed -i 's/mmcblk0/sda/' ~/raspi-config**

**sudo ~/raspi-config**

Както виждате скрипта се копира в home директорията,заместват се означенията на дисковете със sda и се изпълнява като root.
