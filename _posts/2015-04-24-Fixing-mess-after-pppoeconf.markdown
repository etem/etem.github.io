---
layout: post
title:  "Поправяне на бъркотията създадена от pppoeconf"
date:   2015-04-24 21:52:31
comments : true
categories: linux
---
Значителна част от работното ми време преминава в конфигурирането на различни рутери и подобни устройства. За целта използвам Network Manager. Не че много го харесвам, но превключването на различни готови профили на мрежи ми спестява много време.

Поради някаква случайност днеска ми се наложи да вдигна PPPoE over Wireless. Понеже не знаех как точно да създам връзката чрез NM, реших че pppoeconf през терминала ще ме спаси. Свърших си работата но цената беше доста висока .Особено последната опция която ме питаше дали да набира pppoe при зареждане на системата. Естествено от бързината и без много четене избрах "Yes" и главоболието започна.

Въпросната програмка създава нов pppoe интерфейс и се опитва да го вдигне при зареждане на системата. Проблемът е че при следващото включване на лаптопа аз вече няма да използвам pppoe, но системата все още се мъчи да вдигне връзката.
Това бави зареждането с допълнителни 2 минути, което ме вбесява.

Другото което въпросната програма прави е да изключи Network Manager чрез опциите в конфигурационният му файл. Това означава че при всеки старт трябва ръчно да вдигам интерфейсите и да им слагам IP адреси. Естествено е нужен и рестарт мрежовата услуга.
Забелязах че програмата е създала разни записи в /etc/network/interfaces файла. Пробвах с коментирането им но не помогна.

С малко повечко четене на коментари и форуми в интернет открих следното решение :

Отваряте **/etc/NetworkManager/NetworkManager.conf** с някой текстов редактор и администраторски права и променяте полето **managed** на **true**.

Отваряте **/etc/network/interfaces** и затривате всичко освен двете полета за loopback интерфейса. Трябва да останат само : 

`auto lo`

и

`iface lo inet loopback`


Някъде се препоръчва да изтриете /etc/resolv.conf, но аз лично не бих.При мен не тръгна докато не го възстанових със записите за DNS сървърите в него.

{% include disqus.html %}
